<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>School Admin</title>
    <style>
        /* Your existing CSS */
        body { font-family: Arial, sans-serif; margin: 20px; }
        .tabs { margin-bottom: 20px; }
        .tabs a { padding: 10px; margin-right: 5px; text-decoration: none; color: #333; }
        .tabs a.active { background: #0078d4; color: white; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
        .modal-content { background: white; margin: 15% auto; padding: 20px; width: 50%; }
        .modal-header { font-size: 1.2em; margin-bottom: 10px; }
        .modal-footer { margin-top: 20px; }
        .btn { padding: 5px 10px; margin-right: 5px; cursor: pointer; }
        .btn-primary { background: #0078d4; color: white; border: none; }
        .btn-secondary { background: #ccc; border: none; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background: #f2f2f2; }
    </style>
</head>
<body>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <p style="color: red;">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <!-- Navigation -->
    <div class="tabs">
        <a href="{{ url_for('index') }}" {% if active_tab == 'students' %}class="active"{% endif %}>Students</a>
        <a href="{{ url_for('parents') }}" {% if active_tab == 'parents' %}class="active"{% endif %}>Parents</a>
        <a href="{{ url_for('teachers') }}" {% if active_tab == 'teachers' %}class="active"{% endif %}>Teachers</a>
        <a href="{{ url_for('classrooms') }}" {% if active_tab == 'classrooms' %}class="active"{% endif %}>Classrooms</a>
        <a href="{{ url_for('tuition') }}" {% if active_tab == 'tuition' %}class="active"{% endif %}>Tuition</a>
    </div>

    <!-- Content -->
    {% if active_tab == 'students' %}
    <h1>Students</h1>
    <button class="btn btn-primary" onclick="document.getElementById('addStudentModal').style.display='block'">Add Student</button>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Parent</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td>{{ student['first_name'] }} {{ student['last_name'] }}</td>
                <td>{{ student['parent_first_name'] }} {{ student['parent_last_name'] }}</td>
                <td>
                    <button class="btn btn-primary" onclick="openEditStudentModal('{{ student['student_id'] }}', '{{ student['first_name']|e }}', '{{ student['last_name']|e }}', '{{ student['parent_id'] }}')">Edit</button>
                    <form method="POST" action="{{ url_for('delete_student', student_id=student['student_id']) }}" style="display:inline;">
                        <button type="submit" class="btn btn-secondary" onclick="return confirm('Are you sure?');">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% elif active_tab == 'parents' %}
        <h1>Parents</h1>
        <button class="btn btn-primary" onclick="document.getElementById('addParentModal').style.display='block'">Add Parent</button>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for parent in parents %}
                <tr>
                    <td>{{ parent['first_name'] }} {{ parent['last_name'] }}</td>
                    <td>{{ parent['email'] }}</td>
                    <td>{{ parent['phone']|format_phone }}</td>
                    <td>
                        <button class="btn btn-primary" onclick="openEditParentModal('{{ parent['parent_id'] }}', '{{ parent['first_name']|e }}', '{{ parent['last_name']|e }}', '{{ parent['email']|e if parent['email'] else '' }}', '{{ parent['phone']|e }}')">Edit</button>
                        <form method="POST" action="{{ url_for('delete_parent', parent_id=parent['parent_id']) }}" style="display:inline;">
                            <button type="submit" class="btn btn-secondary" onclick="return confirm('Are you sure?');">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    {% elif active_tab == 'teachers' %}
        <h1>Teachers</h1>
        <button class="btn btn-primary" onclick="document.getElementById('addTeacherModal').style.display='block'">Add Teacher</button>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for teacher in teachers %}
                <tr>
                    <td>{{ teacher['first_name'] }} {{ teacher['last_name'] }}</td>
                    <td>{{ teacher['email'] }}</td>
                    <td>{{ teacher['phone']|format_phone }}</td>
                    <td>
                        <button class="btn btn-primary" onclick="openEditTeacherModal('{{ teacher['teacher_id'] }}', '{{ teacher['first_name']|e }}', '{{ teacher['last_name']|e }}', '{{ teacher['email']|e if teacher['email'] else '' }}', '{{ teacher['phone']|e }}')">Edit</button>
                        <form method="POST" action="{{ url_for('delete_teacher', teacher_id=teacher['teacher_id']) }}" style="display:inline;">
                            <button type="submit" class="btn btn-secondary" onclick="return confirm('Are you sure?');">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    {% elif active_tab == 'classrooms' %}
        <h1>Classrooms</h1>
        <button class="btn btn-primary" onclick="document.getElementById('addClassroomModal').style.display='block'">Add Classroom</button>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Capacity</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for classroom in classrooms %}
                <tr>
                    <td>{{ classroom['name'] }}</td>
                    <td>{{ classroom['capacity'] }}</td>
                    <td>
                        <button class="btn btn-primary" onclick="openEditClassroomModal('{{ classroom['classroom_id'] }}', '{{ classroom['name']|e }}', '{{ classroom['capacity'] }}')">Edit</button>
                        <form method="POST" action="{{ url_for('delete_classroom', classroom_id=classroom['classroom_id']) }}" style="display:inline;">
                            <button type="submit" class="btn btn-secondary" onclick="return confirm('Are you sure?');">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    {% elif active_tab == 'tuition' %}
        <h1>Tuition</h1>
        <h2>Per Student</h2>
        <table>
            <thead>
                <tr>
                    <th>Student</th>
                    <th>Parent</th>
                    <th>Grade</th>
                    <th>Days</th>
                    <th>Total ($)</th>
                </tr>
            </thead>
            <tbody>
                {% for t in tuition_data %}
                <tr>
                    <td>{{ t.student_name }}</td>
                    <td>{{ t.parent_name }}</td>
                    <td>{{ t.grade }}</td>
                    <td>{{ t.days|tojson|replace('"{', '')|replace('}"', '')|replace('": "', ': ')|replace('", "', ', ') }}</td>
                    <td>{{ t.total_amount|round(2) }}{% if t.discounted %} (10% sibling discount){% endif %}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <h2>Per Parent</h2>
        <table>
            <thead>
                <tr>
                    <th>Parent</th>
                    <th>Total ($)</th>
                </tr>
            </thead>
            <tbody>
                {% for p in parent_totals %}
                <tr>
                    <td>{{ p.parent_name }}</td>
                    <td>{{ p.total|round(2) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}

    <!-- Modals -->
    <!-- Add Student Modal -->
    <div id="addStudentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Add Student</div>
            <form method="POST" action="{{ url_for('add_student') }}">
                <p><label>First Name:</label><br><input type="text" name="first_name" required></p>
                <p><label>Last Name:</label><br><input type="text" name="last_name" required></p>
                <p><label>Parent:</label><br>
                    <select name="parent_id" required>
                        <option value="">Select Parent</option>
                        {% for parent in parents %}
                        <option value="{{ parent['parent_id'] }}">{{ parent['first_name'] }} {{ parent['last_name'] }}</option>
                        {% endfor %}
                    </select>
                </p>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">OK</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('addStudentModal').style.display='none'">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Parent Modal -->
    <div id="addParentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Add Parent</div>
            <form method="POST" action="{{ url_for('add_parent') }}">
                <p><label>First Name:</label><br><input type="text" name="first_name" required></p>
                <p><label>Last Name:</label><br><input type="text" name="last_name" required></p>
                <p><label>Email:</label><br><input type="email" name="email"></p>
                <p><label>Phone:</label><br><input type="text" name="phone" oninput="formatPhoneInput(this)" placeholder="(xxx)xxx-xxxx"></p>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">OK</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('addParentModal').style.display='none'">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Parent Modal -->
    <div id="editParentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Edit Parent</div>
            <form method="POST" action="{{ url_for('edit_parent') }}" id="editParentForm">
                <input type="hidden" id="edit_parent_id" name="parent_id" value="">
                <input type="hidden" id="edit_parent_id_fallback" name="parent_id_fallback" value="">
                <p><label>First Name:</label><br><input type="text" id="edit_parent_first_name" name="first_name" required></p>
                <p><label>Last Name:</label><br><input type="text" id="edit_parent_last_name" name="last_name" required></p>
                <p><label>Email:</label><br><input type="email" id="edit_parent_email" name="email"></p>
                <p><label>Phone:</label><br><input type="text" id="edit_parent_phone" name="phone" oninput="formatPhoneInput(this)" placeholder="(xxx)xxx-xxxx"></p>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">OK</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('editParentModal').style.display='none'">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Teacher Modal -->
    <div id="addTeacherModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Add Teacher</div>
            <form method="POST" action="{{ url_for('add_teacher') }}">
                <p><label>First Name:</label><br><input type="text" name="first_name" required></p>
                <p><label>Last Name:</label><br><input type="text" name="last_name" required></p>
                <p><label>Email:</label><br><input type="email" name="email" required></p>
                <p><label>Phone:</label><br><input type="text" name="phone" oninput="formatPhoneInput(this)" placeholder="(xxx)xxx-xxxx"></p>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">OK</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('addTeacherModal').style.display='none'">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Teacher Modal -->
    <div id="editTeacherModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Edit Teacher</div>
            <form method="POST" action="{{ url_for('edit_teacher') }}" id="editTeacherForm">
                <input type="hidden" id="edit_teacher_id" name="teacher_id" value="">
                <input type="hidden" id="edit_teacher_id_fallback" name="teacher_id_fallback" value="">
                <p><label>First Name:</label><br><input type="text" id="edit_teacher_first_name" name="first_name" required></p>
                <p><label>Last Name:</label><br><input type="text" id="edit_teacher_last_name" name="last_name" required></p>
                <p><label>Email:</label><br><input type="email" id="edit_teacher_email" name="email" required></p>
                <p><label>Phone:</label><br><input type="text" id="edit_teacher_phone" name="phone" oninput="formatPhoneInput(this)" placeholder="(xxx)xxx-xxxx"></p>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">OK</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('editTeacherModal').style.display='none'">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Classroom Modal -->
    <div id="addClassroomModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Add Classroom</div>
            <form method="POST" action="{{ url_for('add_classroom') }}">
                <p><label>Name:</label><br><input type="text" name="name" required></p>
                <p><label>Capacity:</label><br><input type="number" name="capacity" min="1" required></p>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">OK</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('addClassroomModal').style.display='none'">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Classroom Modal -->
    <div id="editClassroomModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Edit Classroom</div>
            <form method="POST" action="{{ url_for('edit_classroom') }}" id="editClassroomForm">
                <input type="hidden" id="edit_classroom_id" name="classroom_id" value="">
                <input type="hidden" id="edit_classroom_id_fallback" name="classroom_id_fallback" value="">
                <p><label>Name:</label><br><input type="text" id="edit_classroom_name" name="name" required></p>
                <p><label>Capacity:</label><br><input type="number" id="edit_classroom_capacity" name="capacity" min="1" required></p>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">OK</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('editClassroomModal').style.display='none'">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Student Modal -->
    <div id="editStudentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Edit Student</div>
            <form method="POST" action="{{ url_for('edit_student') }}" id="editStudentForm">
                <input type="hidden" id="edit_student_id" name="student_id" value="">
                <p><label>First Name:</label><br><input type="text" id="edit_student_first_name" name="first_name" required></p>
                <p><label>Last Name:</label><br><input type="text" id="edit_student_last_name" name="last_name" required></p>
                <p><label>Parent:</label><br>
                    <select id="edit_student_parent_id" name="parent_id" required>
                        <option value="">Select Parent</option>
                        {% for parent in parents %}
                        <option value="{{ parent['parent_id'] }}">{{ parent['first_name'] }} {{ parent['last_name'] }}</option>
                        {% endfor %}
                    </select>
                </p>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">OK</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('editStudentModal').style.display='none'">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function formatPhoneInput(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length > 3 && value.length <= 6) {
                input.value = `(${value.slice(0, 3)})${value.slice(3)}`;
            } else if (value.length > 6) {
                input.value = `(${value.slice(0, 3)})${value.slice(3, 6)}-${value.slice(6, 10)}`;
            } else {
                input.value = value;
            }
        }

        function openEditStudentModal(studentId, firstName, lastName, parentId) {
            console.log('Opening editStudentModal with:', { studentId, firstName, lastName, parentId });
            if (!studentId) {
                alert('Error: No student ID provided for editing.');
                return;
            }
            try {
                const modal = document.getElementById('editStudentModal');
                const form = document.getElementById('editStudentForm');
                const studentIdInput = document.getElementById('edit_student_id');
                const firstNameInput = document.getElementById('edit_student_first_name');
                const lastNameInput = document.getElementById('edit_student_last_name');
                const parentIdSelect = document.getElementById('edit_student_parent_id');
        
                if (!studentIdInput || !firstNameInput || !lastNameInput || !parentIdSelect) {
                    console.error('Missing input elements');
                    alert('Error: Form inputs not found.');
                    return;
                }
        
                modal.style.display = 'block';
                form.reset();
        
                studentIdInput.value = studentId;
                firstNameInput.value = firstName || '';
                lastNameInput.value = lastName || '';
                parentIdSelect.value = parentId || '';
        
                console.log('Final fields:', {
                    studentId: studentIdInput.value,
                    firstName: firstNameInput.value,
                    lastName: lastNameInput.value,
                    parentId: parentIdSelect.value
                });
        
                form.onsubmit = function(event) {
                    console.log('Submitting editStudentModal form');
                };
            } catch (error) {
                console.error('Error in openEditStudentModal:', error);
                alert('Error opening edit modal: ' + error.message);
            }
        }

        function openEditParentModal(parentId, firstName, lastName, email, phone) {
            console.log('Opening editParentModal with:', { parentId, firstName, lastName, email, phone });
            if (!parentId) {
                alert('Error: No parent ID provided for editing.');
                return;
            }
            try {
                const modal = document.getElementById('editParentModal');
                const form = document.getElementById('editParentForm');
                const parentIdInput = document.getElementById('edit_parent_id');
                const parentIdFallback = document.getElementById('edit_parent_id_fallback');
                const firstNameInput = document.getElementById('edit_parent_first_name');
                const lastNameInput = document.getElementById('edit_parent_last_name');
                const emailInput = document.getElementById('edit_parent_email');
                const phoneInput = document.getElementById('edit_parent_phone');

                if (!parentIdInput || !parentIdFallback || !firstNameInput || !lastNameInput || !emailInput || !phoneInput) {
                    console.error('Missing input elements:', {
                        parentIdInput: !!parentIdInput,
                        parentIdFallback: !!parentIdFallback,
                        firstNameInput: !!firstNameInput,
                        lastNameInput: !!lastNameInput,
                        emailInput: !!emailInput,
                        phoneInput: !!phoneInput
                    });
                    alert('Error: Form inputs not found.');
                    return;
                }

                modal.style.display = 'block';
                form.reset();

                console.log('Setting parentId:', parentId);
                parentIdInput.value = parentId;
                console.log('Setting parentIdFallback:', parentId);
                parentIdFallback.value = parentId;
                console.log('Setting firstName:', firstName || '');
                firstNameInput.value = firstName || '';
                console.log('Setting lastName:', lastName || '');
                lastNameInput.value = lastName || '';
                console.log('Setting email:', email || '');
                emailInput.value = email || '';
                console.log('Setting phone:', phone || '');
                phoneInput.value = phone || '';

                console.log('Final fields:', {
                    parentId: parentIdInput.value,
                    parentIdFallback: parentIdFallback.value,
                    firstName: firstNameInput.value,
                    lastName: lastNameInput.value,
                    email: emailInput.value,
                    phone: phoneInput.value
                });

                form.onsubmit = function(event) {
                    console.log('Before submit, fields:', {
                        parentId: parentIdInput.value,
                        parentIdFallback: parentIdFallback.value,
                        firstName: firstNameInput.value,
                        lastName: lastNameInput.value,
                        email: emailInput.value,
                        phone: phoneInput.value
                    });
                    const formData = new FormData(form);
                    console.log('Submitting editParentModal form:', Object.fromEntries(formData));
                    return true;
                };
            } catch (error) {
                console.error('Error in openEditParentModal:', error);
                alert('Error opening edit modal: ' + error.message);
            }
        }

        function openEditTeacherModal(teacherId, firstName, lastName, email, phone) {
            console.log('Opening editTeacherModal with:', { teacherId, firstName, lastName, email, phone });
            if (!teacherId) {
                alert('Error: No teacher ID provided for editing.');
                return;
            }
            try {
                const modal = document.getElementById('editTeacherModal');
                const form = document.getElementById('editTeacherForm');
                const teacherIdInput = document.getElementById('edit_teacher_id');
                const teacherIdFallback = document.getElementById('edit_teacher_id_fallback');
                const firstNameInput = document.getElementById('edit_teacher_first_name');
                const lastNameInput = document.getElementById('edit_teacher_last_name');
                const emailInput = document.getElementById('edit_teacher_email');
                const phoneInput = document.getElementById('edit_teacher_phone');

                if (!teacherIdInput || !teacherIdFallback || !firstNameInput || !lastNameInput || !emailInput || !phoneInput) {
                    console.error('Missing input elements:', {
                        teacherIdInput: !!teacherIdInput,
                        teacherIdFallback: !!teacherIdFallback,
                        firstNameInput: !!firstNameInput,
                        lastNameInput: !!lastNameInput,
                        emailInput: !!emailInput,
                        phoneInput: !!phoneInput
                    });
                    alert('Error: Form inputs not found.');
                    return;
                }

                modal.style.display = 'block';
                form.reset();

                console.log('Setting teacherId:', teacherId);
                teacherIdInput.value = teacherId;
                console.log('Setting teacherIdFallback:', teacherId);
                teacherIdFallback.value = teacherId;
                console.log('Setting firstName:', firstName || '');
                firstNameInput.value = firstName || '';
                console.log('Setting lastName:', lastName || '');
                lastNameInput.value = lastName || '';
                console.log('Setting email:', email || '');
                emailInput.value = email || '';
                console.log('Setting phone:', phone || '');
                phoneInput.value = phone || '';

                console.log('Final fields:', {
                    teacherId: teacherIdInput.value,
                    teacherIdFallback: teacherIdFallback.value,
                    firstName: firstNameInput.value,
                    lastName: lastNameInput.value,
                    email: emailInput.value,
                    phone: phoneInput.value
                });

                form.onsubmit = function(event) {
                    console.log('Before submit, fields:', {
                        teacherId: teacherIdInput.value,
                        teacherIdFallback: teacherIdFallback.value,
                        firstName: firstNameInput.value,
                        lastName: lastNameInput.value,
                        email: emailInput.value,
                        phone: phoneInput.value
                    });
                    const formData = new FormData(form);
                    console.log('Submitting editTeacherModal form:', Object.fromEntries(formData));
                    return true;
                };
            } catch (error) {
                console.error('Error in openEditTeacherModal:', error);
                alert('Error opening edit modal: ' + error.message);
            }
        }

        function openEditClassroomModal(classroomId, name, capacity) {
            console.log('Opening editClassroomModal with:', { classroomId, name, capacity });
            if (!classroomId) {
                alert('Error: No classroom ID provided for editing.');
                return;
            }
            try {
                const modal = document.getElementById('editClassroomModal');
                const form = document.getElementById('editClassroomForm');
                const classroomIdInput = document.getElementById('edit_classroom_id');
                const classroomIdFallback = document.getElementById('edit_classroom_id_fallback');
                const nameInput = document.getElementById('edit_classroom_name');
                const capacityInput = document.getElementById('edit_classroom_capacity');

                if (!classroomIdInput || !classroomIdFallback || !nameInput || !capacityInput) {
                    console.error('Missing input elements:', {
                        classroomIdInput: !!classroomIdInput,
                        classroomIdFallback: !!classroomIdFallback,
                        nameInput: !!nameInput,
                        capacityInput: !!capacityInput
                    });
                    alert('Error: Form inputs not found.');
                    return;
                }

                modal.style.display = 'block';
                form.reset();

                console.log('Setting classroomId:', classroomId);
                classroomIdInput.value = classroomId;
                console.log('Setting classroomIdFallback:', classroomId);
                classroomIdFallback.value = classroomId;
                console.log('Setting name:', name || '');
                nameInput.value = name || '';
                console.log('Setting capacity:', capacity || '');
                capacityInput.value = capacity || '';

                console.log('Final fields:', {
                    classroomId: classroomIdInput.value,
                    classroomIdFallback: classroomIdFallback.value,
                    name: nameInput.value,
                    capacity: capacityInput.value
                });

                form.onsubmit = function(event) {
                    console.log('Before submit, fields:', {
                        classroomId: classroomIdInput.value,
                        classroomIdFallback: classroomIdFallback.value,
                        name: nameInput.value,
                        capacity: capacityInput.value
                    });
                    const formData = new FormData(form);
                    console.log('Submitting editClassroomModal form:', Object.fromEntries(formData));
                    return true;
                };
            } catch (error) {
                console.error('Error in openEditClassroomModal:', error);
                alert('Error opening edit modal: ' + error.message);
            }
        }
    </script>
</body>
</html>